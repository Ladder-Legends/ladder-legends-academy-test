echo "ğŸ” Running pre-push checks..."

# Run TypeScript type checking
echo "ğŸ“ Type checking..."
npx tsc --noEmit || exit 1

# Run ESLint
echo "ğŸ”§ Linting..."
npm run lint || exit 1

# Run build to ensure it compiles (using separate build directory)
echo "ğŸ—ï¸  Building (using .next-pre-push cache)..."
NEXT_BUILD_DIR=.next-pre-push npm run build || exit 1

# Clean up the pre-push build directory to save space
rm -rf .next-pre-push

echo "âœ… All checks passed! Pushing..."
